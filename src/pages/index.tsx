import Head from "next/head";
import { SignInButton, SignOutButton, useUser } from "@clerk/nextjs";
import { api } from "~/utils/api";
import Image from "next/image";
import { useEffect, useState } from "react";

export default function Home() {
  const user = useUser();
  const [isClient, setIsClient] = useState(false)
  const { data } = api.post.getAll.useQuery() 

  useEffect(()=>{
    setIsClient(true)
  }, [])

  if(data) console.log(data)
  if(!isClient) return

  return (
    <div className="flex min-h-screen flex-col items-center justify-center bg-zinc-900 text-slate-200">
      <Head>
        <title>Create T3 App</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div >

        {/* layout wrapper */}
        <div className="flex justify-center items-start w-full">
          <div className="max-w-4xl min-h-screen w-full border-x border-slate-900 flex flex-col">

          <header>
            <div className="flex flex-col text-white bg-blue-500">
              {!user.isSignedIn && <SignInButton />}
              {user.isSignedIn && <SignOutButton />}
            </div>
          </header>
          {!user.isSignedIn &&          
          <> 
            <TopSection />
            <MiddleSection />
            <BottomSection />
          </>}
          {user.isSignedIn && <div> User is signed in</div>}

          {/* layout wrapper */}
          </div>  
        </div>

      </div>
    </div>
  );
}

function TopSection (){
  return (
    <section 
    className="flex flex-col md:flex-row w-full gap-4 h-full" >
      {/* top section */}
    <div className="flex justify-center items-center w-full h-full py-8 md:py-20 gap-2">
      <Image
        priority
        src="/images/streamsave_logo.png"
        alt="StreamSave Logo"
        width={1900}
        height={3330}
        className="w-1/3"
      />
    
      <div className="flex flex-col gap-4">
        <div>
          <h1 className="text-xl lg:text-5xl font-bold text-left">
            Fill Your <br />Show Hole<br />
            <span className="text-lg">w/ StreamSave</span>
          </h1>
        </div>
        <button
          className="flex justify-center items-center px-6 py-2 bg-pink-700 transition-all hover:scale-125 hover:rounded-md">
            <SignInButton />
          </button>
      </div>

    </div>      
    <div
      className="w-full lg:w-2/3 flex justify-center lg:justify-start items-center lg:pl-12 py-20 lg:py-40 bg-gradient-to-l from-sky-700 to-transparent"
    >
      <p className="w-48 font-bold text-center">
        Organize your favorite shows and movies, or discover new ones!
      </p>
    </div>
  </section>
  )
}

function MiddleSection (){
  return (
    <section
    className="bg-gradient-to-tr from-pink-700 via-pink-900 to-zinc-900 w-full text-white flex flex-col justify-end items-center py-16 px-8"
  >
  <div
    className="flex justify-center items-center gap-2 md:gap-8 lg:gap-16 py-8"
  >
    <Image src="/images/BreakingBad.png" alt="" width={144} height={290} />
    <Image src="/images/TheOffice.png" alt="" width={144} height={290} />
    <Image src="/images/TheLastOfUs.png" alt="" width={144} height={290}  />
  </div>
  <h2 className="text-2xl lg:text-5xl font-bold leading-normal line-clamp-2">
    Your Favorite Shows & Movies
  </h2>
</section>
  )
}

function BottomSection (){

  return (
    <section
    className="bg-gradient-to-bl from-sky-600 via-sky-900 to-zinc-900 w-full flex justify-center items-center text-white p-4"
  >
    <div className="flex flex-col justify-center items-start gap-8 w-1/2">
      <h2 className="text-2xl lg:text-5xl font-bold leading-normal">
        Organized How<br />You Want
      </h2>
      <button
                    className="flex justify-center items-center px-6 py-2 bg-pink-700 transition-all hover:scale-125 hover:rounded-md">
                      <SignInButton />
                    </button>
    </div>
    <div className="w-1/2 h-auto">
      <Image
        src="/images/mobile-list.png"
        alt="How the user's list looks on a mobile device"
        className="py-12"
        width={260}
        height={336}
      />
    </div>
  </section>
  )
}